<form [formGroup]=launchVoteForm>
  <mat-form-field>
    <input matInput placeholder="Topic" formControlName="topic">
  </mat-form-field>

  <div formGroupName="timeframes">
    <mat-form-field>
      <input matInput matDatepicker placeholder="Registration Opens" formControlName="registrationOpens">
    </mat-form-field>

    <mat-form-field>
      <input matInput [matDatepicker]="regClosesPicker"
             placeholder="Registration Closes" formControlName="registrationCloses"
             [min]="minRegistrationClosesDate">
      <mat-datepicker-toggle matSuffix [for]="regClosesPicker"></mat-datepicker-toggle>
      <mat-datepicker #regClosesPicker></mat-datepicker>
    </mat-form-field>

    <mat-form-field>
      <input matInput [matDatepicker]="votingClosesPicker"
             placeholder="Voting Closes" formControlName="votingCloses"
             [min]="minVotingClosesDate$ | async">
      <mat-datepicker-toggle matSuffix [for]="votingClosesPicker"></mat-datepicker-toggle>
      <mat-datepicker #votingClosesPicker></mat-datepicker>
    </mat-form-field>
  </div>

  <div formArrayName="candidates">
    <div *ngFor="let candidate of candidates.controls; let i=index" [formGroupName]="i">
      <mat-form-field>
        <input matInput formControlName="name">
      </mat-form-field>
      <button type="button" mat-icon-button (click)="candidates.removeAt(i)">
        <mat-icon>delete</mat-icon>
      </button>
    </div>
  </div>

  <mat-form-field>
    <input matInput placeholder="New Candidate" (keyup.enter)="addCandidate()" formControlName="newCandidate">
  </mat-form-field>
  <!-- The id is only used in unit tests to locate the button -->
  <button id="addCandidateButton" type="button" mat-icon-button (click)="addCandidate()">
    <mat-icon>add</mat-icon>
  </button>

  <div>
    <button type="submit"
            [disabled]="!launchVoteForm.valid"
            mat-raised-button
            color="primary">
      Launch
    </button>
  </div>
</form>
